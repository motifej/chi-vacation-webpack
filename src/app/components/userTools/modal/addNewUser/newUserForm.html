<section id="popup4" class="user-edit-profile lightbox" style="display: block;">
  <h1>New user form</h1>
  <!-- form add new user-->
  <form class="fancybox-form" name="addUserForm"  ng-submit="user.submitForm(addUserForm)" novalidate>
    <fieldset>

      <div class="row">
        <label class="label-left" ng-class="{'has-error': addUserForm.firstname.$invalid && (user.invalidForm || addUserForm.firstname.$dirty)}" for="First_name" >First name</label>
        <input type="text" id="First_name" name="firstname" ng-model="user.newUser.firstname" ng-pattern="user.namePattern" maxlength="50" required>
      </div>

      <div class="row">
        <label class="label-left" for="Last_name" ng-class="{'has-error': addUserForm.lastname.$invalid && (user.invalidForm || addUserForm.lastname.$dirty)}">Last name</label>
        <input type="text" id="Last_name" name="lastname" ng-model="user.newUser.lastname" ng-pattern="user.namePattern" maxlength="50" required>
      </div>

      <div class="row">
        <label class="label-left" for="lastname">Employment date</label>
        <div class="icom-calendar">
          <chi-datepicker class="datepicker" name="employmentdate" ng-model="user.employmentdate" is-show-all-days="true"></chi-datepicker>
        </div>
      </div>

      <div class="row">
        <label class="label-left" for="Email3" ng-class="{'has-error': addUserForm.email.$invalid && (user.invalidForm || addUserForm.email.$dirty)}">Email</label>
        <input type="email" id="Email3" name='email' ng-model="user.newUser.email" ng-pattern="user.emailPattern" maxlength="50" required>
      </div>

      <div class="row">
        <label for="Team1" class="label-left">Team</label>
        <div class="filter-holder" ng-class="{'has-error': addUserForm.userGroup.$invalid && (user.invalidForm || addUserForm.userGroup.$dirty)}">
          <span ng-click="user.openGroupSelectMenu()" ng-blur="user.closeGroupSelectMenu($event)" class="jcf-select jcf-unselectable">
            <span class="jcf-select-text">
              <span class="">{{user.newUser.group}}</span>
            </span>
            <span class="jcf-select-opener"></span>
            <div ng-show="user.groupSelectMenuIsOpened" class="jcf-select-drop jcf-select-jcf-hidden jcf-unselectable" style="width: 285px;">
              <div class="jcf-select-drop-content">
                <span class="jcf-list jcf-scroll-active">
                  <span class="jcf-list-content" style="max-height: 217px; overflow: auto;">
                    <ul>
                      <li ng-repeat="group in user.group"><span ng-click="user.choiceGroup(group, $event)" class="jcf-option" ng-class="{'jcf-selected': user.newUser.group == group}">{{group}}</span></li>
                    </ul>
                  </span>
                </span>
              </div>
            </div>
          </span>
        </div>
      </div>

      <div class="row">
        <label for="User1" class="label-left">Role</label>
        <div class="filter-holder" ng-class="{'has-error': addUserForm.userRole.$invalid && (user.invalidForm || addUserForm.userRole.$dirty)}">
          <span ng-click="user.openRoleSelectMenu()" ng-blur="user.closeRoleSelectMenu($event)" class="jcf-select jcf-unselectable">
            <span class="jcf-select-text">
              <span class="">{{user.newUser.role}}</span>
            </span>
            <span class="jcf-select-opener"></span>
            <div ng-show="user.roleSelectMenuIsOpened" class="jcf-select-drop jcf-select-jcf-hidden jcf-unselectable" style="width: 285px;">
              <div class="jcf-select-drop-content">
                <span class="jcf-list jcf-scroll-active">
                  <span class="jcf-list-content" style="max-height: 217px; overflow: auto;">
                    <ul>
                      <li ng-repeat="role in user.role"><span ng-click="user.choiceRole(role, $event)" class="jcf-option" ng-class="{'jcf-selected': user.newUser.role == role}">{{role}}</span></li>
                    </ul>
                  </span>
                </span>
              </div>
            </div>
          </span>
        </div>
      </div>

      <div class="form-group" ng-if="user.newUser.role === user.role.TEAMLEAD">
        <div>
          <label class="col-md-4 control-label" for="groups">Responsible for</label>
          <multiselect class="col-md-4" id="groups" ng-model="user.newUser.responsibleFor" options="group for group in user.group"></multiselect>
        </div>
      </div>      

      <div class="row">
        <button type="submit" class="btn btn-red">Save</button>
        <a href="#" class="btn btn-border-red close" title="cansel" ng-click="user.cancelNewUser()">Cancel</a>
      </div>

    </fieldset>
  </form>
</section>